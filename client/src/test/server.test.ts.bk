import { test, expect } from "@playwright/test";

test("handles slow network conditions gracefully", async ({ page }) => {
  await page.goto("http://localhost:5173");

  // הגדרת רשת איטית
  await page.setViewportSize({ width: 1280, height: 800 });
  await page.route("**/*", (route) => {
    route.continue({}); // לדחות את התגובה ב-2 שניות
  });

  // הזנת כתובות URL בטופס ולחיצה על כפתור ההגשה
  await page.fill(
    'input[placeholder="Enter Url"]:nth-of-type(1)',
    "https://www.google.com"
  );
  await page.click('button[type="submit"]');

  // בדיקה שהאפליקציה ממשיכה לעבוד ולא קופאת
  const loaderVisible = await page.isVisible(".loading-indicator"); // לדוגמא בלבד
  expect(loaderVisible).toBe(true);
});
